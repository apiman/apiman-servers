<features name="my-repo" xmlns="http://karaf.apache.org/xmlns/features/v1.1.0">

    <repository>mvn:org.keycloak/keycloak-osgi-features/1.6.1.Final/xml/features</repository>

    <feature name="apiman-lib" version="${project.version}">
        <feature>hibernate</feature>
        <feature>pax-cdi-1.1-weld</feature>
        <feature>keycloak</feature>
        <feature version="1.5.3">swagger</feature>
        <feature version="1.7.2">elasticsearch</feature>
        <bundle>mvn:org.eclipse.persistence/javax.persistence/2.1.0</bundle>
        <bundle>wrap:mvn:org.jboss.weld.environment/weld-environment-common/2.3.0.Final</bundle>
        <bundle>wrap:mvn:org.jboss.weld.servlet/weld-servlet-core/2.3.0.Final</bundle>
        <bundle>wrap:mvn:org.jboss/jandex/1.2.0.Final</bundle>
        <bundle>wrap:mvn:org.apache.logging.log4j/log4j-api/2.3</bundle>
        <bundle>wrap:mvn:org.apache.logging.log4j/log4j-core/2.3</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-configuration/1.9_2</bundle>
        <bundle>mvn:joda-time/joda-time/1.6.2</bundle>
        <bundle>wrap:mvn:org.picketbox/jboss-security-spi/4.1.1.Final</bundle>
<!--        <bundle>wrap:mvn:org.jboss.resteasy/resteasy-jaxrs/2.3.10.Final$Import-Package=*,org.jboss.resteasy.cdi</bundle>
        <bundle>wrap:mvn:org.jboss.resteasy/resteasy-cdi/2.3.10.Final</bundle>-->
        <bundle>mvn:io.apiman/resteasy-bundle/2.3.10.Final_1</bundle>

        <!-- <bundle>mvn:javax.servlet/javax.servlet-api/3.1.0</bundle>
        <bundle>mvn:org.eclipse.jetty/jetty-security/9.3.2.v20150730</bundle>
        <bundle>mvn:org.eclipse.jetty/jetty-http/9.3.2.v20150730</bundle>
        <bundle>mvn:org.eclipse.jetty/jetty-util/9.3.2.v20150730</bundle>
        <bundle>mvn:org.eclipse.jetty/jetty-server/9.3.2.v20150730</bundle>
        <bundle>mvn:org.eclipse.jetty/jetty-io/9.3.2.v20150730</bundle>
        <bundle>mvn:org.eclipse.jetty/jetty-servlet/9.3.2.v20150730</bundle>
        -->
    </feature>

    <feature name="swagger" version="1.5.3">
        <!-- swagger 1.5 is not yet available as a feature but only 1.3.6 -->
        <bundle>mvn:com.fasterxml.jackson.core/jackson-databind/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.core/jackson-core/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.module/jackson-module-jaxb-annotations/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-xml/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-json-provider/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.jaxrs/jackson-jaxrs-base/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.core/jackson-annotations/2.4.5</bundle>
        <bundle>mvn:com.fasterxml.jackson.datatype/jackson-datatype-joda/2.4.5</bundle>
        <bundle>wrap:mvn:org.reflections/reflections/0.9.9</bundle>
        <bundle>mvn:com.google.code.findbugs/annotations/2.0.1</bundle>
        <bundle>mvn:io.swagger/swagger-annotations/1.5.3</bundle>
        <bundle>wrap:mvn:io.swagger/swagger-core/1.5.3</bundle>
        <bundle>wrap:mvn:io.swagger/swagger-models/1.5.3</bundle>
        <bundle>wrap:mvn:io.swagger/swagger-jaxrs/1.5.3</bundle>
    </feature>

    <feature name="elasticsearch" version="1.7.2">
        <bundle>mvn:com.google.code.gson/gson/2.3.1</bundle>
        <bundle>wrap:mvn:io.searchbox/jest-common/0.1.6</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.elasticsearch/1.7.2_1</bundle>
        <bundle>mvn:org.apache.commons/commons-lang3/3.3.2</bundle>
        <bundle>wrap:mvn:org.scannotation/scannotation/1.0.3</bundle>
    </feature>

    <feature name="apiman-gateway" version="${project.version}">
        <bundle>mvn:io.apiman/apiman-gateway-engine-beans/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-gateway-api-rest/${project.version}</bundle>
    </feature>

    <feature name="apiman-common" version="${project.version}">
        <bundle>mvn:io.apiman/apiman-common-auth/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-common-util/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-common-config/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-common-plugin/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-common-servlet/${project.version}</bundle>
    </feature>

    <feature name="apiman-manager-api" version="${project.version}">
        <bundle>mvn:io.apiman/apiman-manager-api-beans/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-core/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-es/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-config/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-security/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-micro/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-jpa/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-export-import-api/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-gateway/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-rest/${project.version}</bundle>
        <bundle>mvn:io.apiman/apiman-manager-api-rest-impl/${project.version}</bundle>
    </feature>

    <feature name="apiman-server-manager" version="${project.version}">
        <feature>apiman-lib</feature>
        <feature>apiman-gateway</feature>
        <feature>apiman-common</feature>
        <feature>apiman-manager-api</feature>
        <bundle>mvn:io.apiman/apiman-servers-manager-es/${project.version}</bundle>
    </feature>

<!--    <feature name="apiman-server-gateway" version="${project.version}">
        <feature>apiman-lib</feature>
        <feature>apiman-gateway</feature>
        <feature>apiman-common</feature>
        <feature>apiman-manager-api</feature>
        <bundle>mvn:io.apiman/apiman-servers-gateway-es/${project.version}</bundle>
    </feature>-->

</features>